<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Knight Move</title>
    <link rel="stylesheet" href="node_modules/animate.css/animate.min.css">
    <link href='https://fonts.googleapis.com/css?family=PT+Sans|Autour+One|Source+Code+Pro' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body onload="loadgame()">
    <section id="sidebar">
      <div class="header">
        <div>
          <h1 class="title">Knight Move</h1>
        </div>
      </div>
<!--
	  <table style=" width: 100%;margin-top: 10vh" >
		<tbody>
		<tr>
		<td style="width: 20%;"><h2 style="font-size: 2vw;"> Size : </h2></td>
		<td style="width: 80%;">		
			<div class="select">
			  <select name="slct" id="slct"  onchange="setSize()">
				<option selected value="4">4x4</option>
				<option value="5">5x5</option>
				<option value="6">6x6</option>
				<option value="7">7x7</option>
				<option value="8">8x8</option>
			  </select>
			</div>
		</td>
		</tr>
		</tbody>
		</table>
-->
	  <table class="level" style=" width: 100%;margin-top:15vh" >
		<tbody>
		<tr>
		<td style="width: 20%;"><h2 style="font-size: 2vw;" id="levelname">&nbsp;Level&nbsp;:&nbsp;</h2></td>
		<td style="width: 80%;">		
			<div class="select">
			  <select name="level" id="level"  onchange="loadgame()">
				<option selected value="1">1</option>
				<option  value='2'>2</option>
				<option  value='3'>3</option>
				<option  value='4'>4</option>
				<option  value='5'>5</option>
				<option  value='6'>6</option>
				<option  value='7'>7</option>
				<option  value='8'>8</option>
				<option  value='9'>9</option>
				<option  value='10'>10</option>
				<option  value='11'>11</option>
				<option  value='12'>12</option>
				<option  value='13'>13</option>
				<option  value='14'>14</option>
				<option  value='15'>15</option>
				<option  value='16'>16</option>
				<option  value='17'>17</option>
				<option  value='18'>18</option>
				<option  value='19'>19</option>
				<option  value='20'>20</option>
				<option  value='21'>21</option>
				<option  value='22'>22</option>
				<option  value='23'>23</option>
				<option  value='24'>24</option>
				<option  value='25'>25</option>
				<option  value='26'>26</option>
				<option  value='27'>27</option>
				<option  value='28'>28</option>
				<option  value='29'>29</option>
				<option  value='30'>30</option>
				<option  value='31'>31</option>
				<option  value='32'>32</option>
			  </select>
			</div>
		</td>
		</tr>
		</tbody>
		</table>

<table class="button_1" style=" width: 100%;margin-top: 25vh;" >
<tbody>
<tr>
<!--<td style="width: 33.3333%;"> <button class="button-one" onclick="newgame()">New</button></td>-->
<td style="width: 25%;"> <button class="button-one" onclick="loadgame()">Restart</button></td>
<td style="width: 25%;"> <button class="button-one" onclick="undo()">Undo</button></td> 
<td style="width: 25%;"> <button class="button-one" onclick="solve()">Solve</button></td>
<td style="width: 25%;"> <button class="button-one" onclick="help()">Help</button></td>
</tr>
</tbody>
</table>
<div id="finished" class="overlay">
	<div class="popup">
		<h2>Congratualtion</h2>
		<a class="close" href="#" onclick="closefinish()">&times;</a>
		<div class="content">
			You have successfully completed the level.
		</div>
	</div>
</div>

<div id="gameover" class="overlay">
	<div class="popup">
		<h2>Game Over</h2>
		<a class="close" href="#" onclick="closegameover()">&times;</a>
		<div class="content">
			No possible move exists! Please try again.
		</div>
	</div>
</div>

<div id="help" class="overlay">
	<div class="popup">
		<h2>Help</h2>
		<a class="close" href="#" onclick="closehelp()">&times;</a>
		<div class="content">
			The Knight&rsquo;s Tour is a mathematical puzzle that has endured over 1000 years.<br><br>It is a sequence of moves of a knight on a chessboard such that the knight visits every box only once.<br><br>
			This is simple: Click boxes in L-shaped paths, like the knight in chess, and see if you can turn all the red boxes to white without getting stuck! <br><br>
			To start the game, click on any red box. Then click on next red box with a dot on it. You can't use the empty/white boxs to move around.</br></br>If you click on a box once you can't click it again. Game will finish when every red box has been clicked once.  <br><br>
			In the Screen, you will get three buttons. <br> &bull; Restart : To restart the game <br> &bull; Undo : Undo the last move <br> &bull; Solve : Show the solution of the game. <br><br>
		</div>
	</div>
</div>


    </section>
    <section id="view">
      <div id="board">
        <div id="overlay">	
			<span class="plot" onclick="move(1)"></span>
			<span class="plot" onclick="move(2)"></span>
			<span class="plot" onclick="move(3)"></span>
			<span class="plot" onclick="move(4)"></span>
			<span class="plot" onclick="move(5)"></span>
			<span class="plot" onclick="move(6)"></span>
			<span class="plot" onclick="move(7)"></span>
			<span class="plot" onclick="move(8)"></span>
			<span class="plot" onclick="move(9)"></span>
			<span class="plot" onclick="move(10)"></span>
			<span class="plot" onclick="move(11)"></span>
			<span class="plot" onclick="move(12)"></span>
			<span class="plot" onclick="move(13)"></span>
			<span class="plot" onclick="move(14)"></span>
			<span class="plot" onclick="move(15)"></span>
			<span class="plot" onclick="move(16)"></span>
			<span class="plot" onclick="move(17)"></span>
			<span class="plot" onclick="move(18)"></span>
			<span class="plot" onclick="move(19)"></span>
			<span class="plot" onclick="move(20)"></span>
			<span class="plot" onclick="move(21)"></span>
			<span class="plot" onclick="move(22)"></span>
			<span class="plot" onclick="move(23)"></span>
			<span class="plot" onclick="move(24)"></span>
			<span class="plot" onclick="move(25)"></span>
			<span class="plot" onclick="move(26)"></span>
			<span class="plot" onclick="move(27)"></span>
			<span class="plot" onclick="move(28)"></span>
			<span class="plot" onclick="move(29)"></span>
			<span class="plot" onclick="move(30)"></span>
			<span class="plot" onclick="move(31)"></span>
			<span class="plot" onclick="move(32)"></span>
			<span class="plot" onclick="move(33)"></span>
			<span class="plot" onclick="move(34)"></span>
			<span class="plot" onclick="move(35)"></span>
			<span class="plot" onclick="move(36)"></span>
			<span class="plot" onclick="move(37)"></span>
			<span class="plot" onclick="move(38)"></span>
			<span class="plot" onclick="move(39)"></span>
			<span class="plot" onclick="move(40)"></span>
			<span class="plot" onclick="move(41)"></span>
			<span class="plot" onclick="move(42)"></span>
			<span class="plot" onclick="move(43)"></span>
			<span class="plot" onclick="move(44)"></span>
			<span class="plot" onclick="move(45)"></span>
			<span class="plot" onclick="move(46)"></span>
			<span class="plot" onclick="move(47)"></span>
			<span class="plot" onclick="move(48)"></span>
			<span class="plot" onclick="move(49)"></span>
			<span class="plot" onclick="move(50)"></span>
			<span class="plot" onclick="move(51)"></span>
			<span class="plot" onclick="move(52)"></span>
			<span class="plot" onclick="move(53)"></span>
			<span class="plot" onclick="move(54)"></span>
			<span class="plot" onclick="move(55)"></span>
			<span class="plot" onclick="move(56)"></span>
			<span class="plot" onclick="move(57)"></span>
			<span class="plot" onclick="move(58)"></span>
			<span class="plot" onclick="move(59)"></span>
			<span class="plot" onclick="move(60)"></span>
			<span class="plot" onclick="move(61)"></span>
			<span class="plot" onclick="move(62)"></span>
			<span class="plot" onclick="move(63)"></span>
			<span class="plot" onclick="move(64)"></span>
        </div>
        <div id="matrix">
			<span class="plot" id="cell1" ></span>
			<span class="plot" id="cell2" ></span>
			<span class="plot" id="cell3" ></span>
			<span class="plot" id="cell4" ></span>
			<span class="plot" id="cell5" ></span>
			<span class="plot" id="cell6" ></span>
			<span class="plot" id="cell7" ></span>
			<span class="plot" id="cell8" ></span>
			<span class="plot" id="cell9" ></span>
			<span class="plot" id="cell10"></span>
			<span class="plot" id="cell11"></span>
			<span class="plot" id="cell12"></span>
			<span class="plot" id="cell13"></span>
			<span class="plot" id="cell14"></span>
			<span class="plot" id="cell15"></span>
			<span class="plot" id="cell16"></span>
			<span class="plot" id="cell17"></span>
			<span class="plot" id="cell18"></span>
			<span class="plot" id="cell19"></span>
			<span class="plot" id="cell20"></span>
			<span class="plot" id="cell21"></span>
			<span class="plot" id="cell22"></span>
			<span class="plot" id="cell23"></span>
			<span class="plot" id="cell24"></span>
			<span class="plot" id="cell25"></span>
			<span class="plot" id="cell26"></span>
			<span class="plot" id="cell27"></span>
			<span class="plot" id="cell28"></span>
			<span class="plot" id="cell29"></span>
			<span class="plot" id="cell30"></span>
			<span class="plot" id="cell31"></span>
			<span class="plot" id="cell32"></span>
			<span class="plot" id="cell33"></span>
			<span class="plot" id="cell34"></span>
			<span class="plot" id="cell35"></span>
			<span class="plot" id="cell36"></span>
			<span class="plot" id="cell37"></span>
			<span class="plot" id="cell38"></span>
			<span class="plot" id="cell39"></span>
			<span class="plot" id="cell40"></span>
			<span class="plot" id="cell41"></span>
			<span class="plot" id="cell42"></span>
			<span class="plot" id="cell43"></span>
			<span class="plot" id="cell44"></span>
			<span class="plot" id="cell45"></span>
			<span class="plot" id="cell46"></span>
			<span class="plot" id="cell47"></span>
			<span class="plot" id="cell48"></span>
			<span class="plot" id="cell49"></span>
			<span class="plot" id="cell50"></span>
			<span class="plot" id="cell51"></span>
			<span class="plot" id="cell52"></span>
			<span class="plot" id="cell53"></span>
			<span class="plot" id="cell54"></span>
			<span class="plot" id="cell55"></span>
			<span class="plot" id="cell56"></span>
			<span class="plot" id="cell57"></span>
			<span class="plot" id="cell58"></span>
			<span class="plot" id="cell59"></span>
			<span class="plot" id="cell60"></span>
			<span class="plot" id="cell61"></span>
			<span class="plot" id="cell62"></span>
			<span class="plot" id="cell63"></span>
			<span class="plot" id="cell64"></span>
        </div>
	 </div>
    </section>
	
    <section id="button_layout">
      <div id="button_div">	
	<table  style=" width: 100%;margin-top: 2vh;" >
<tbody>
<tr>
<!--<td style="width: 33.3333%;"> <button class="button-one" onclick="newgame()">New</button></td>-->
<td style="width: 25%;"> <button class="button-one" onclick="loadgame()">Restart</button></td>
<td style="width: 25%;"> <button class="button-one" onclick="undo()">Undo</button></td> 
<td style="width: 25%;"> <button class="button-one" onclick="solve()">Solve</button></td>
<td style="width: 25%;"> <button class="button-one" onclick="help()">Help</button></td>
</tr>
</tbody>
</table>
	 </div>
    </section>

    <script src="node_modules/jquery/dist/jquery.min.js"></script>
	<script type="text/javascript">
	function setSize() {
		var x =  Math.sqrt(data_arr.length);

		const gridElement = document.querySelector("#overlay");
		gridElement.style["grid-template-columns"] = "repeat("+x+", 1fr)";
		const gridElement1 = document.querySelector("#matrix");
		gridElement1.style["grid-template-columns"] = "repeat("+x+", 1fr)";
		const gridElementr = document.querySelector("#overlay");
		gridElementr.style["grid-template-rows"] = "repeat("+x+", 1fr)";
		const gridElementr1 = document.querySelector("#matrix");
		gridElementr1.style["grid-template-rows"] = "repeat("+x+", 1fr)";
		

}

	
			var data = ['0 1 0 1 0 1 0 0 0 0 1 0 1 0 0 0',
						'1 0 0 0 0 1 1 0 1 1 0 0 0 0 1 1',
						'0 0 1 1 1 1 0 0 0 0 1 1 1 1 0 0',
						'1 1 0 0 1 0 1 1 0 1 1 0 0 1 0 0',
						'0 0 0 1 1 1 1 0 1 0 1 0 1 1 1 0',
						'1 1 1 0 1 0 1 0 1 1 1 0 0 1 0 0',
						'0 1 0 1 0 1 1 0 1 0 1 1 1 1 0 0',
						'1 1 1 0 1 0 0 1 1 1 1 0 0 0 1 0',
						'0 1 0 0 0 1 1 0 1 0 1 1 1 1 1 0',
						'0 1 1 0 1 1 1 1 1 0 0 1 0 1 1 0',
						'1 1 0 0 0 1 1 1 0 1 1 1 1 1 0 0',
						'1 0 1 0 1 1 1 0 0 1 0 1 0 1 1 1',
						'1 1 1 0 1 0 1 0 1 1 1 1 0 1 0 1',
						'1 1 1 0 1 0 1 1 1 1 0 1 0 1 1 0',
						'0 1 0 1 1 1 1 1 0 1 1 1 0 1 0 1',
						'0 1 1 0 1 1 1 1 0 1 1 0 1 1 1 1',
						'1 1 1 1 1 1 1 1 0 1 1 0 0 1 1 0',
						'1 0 1 1 1 1 1 0 0 1 1 1 1 1 0 1',
						'1 1 0 0 1 1 1 1 0 1 1 1 0 1 0 1',
						'0 0 1 1 1 1 1 0 1 1 1 0 1 1 1 1',
						'1 1 0 0 0 1 1 1 1 1 1 1 1 0 1 1',
						'0 0 1 1 1 1 1 1 1 1 1 0 1 1 1 0',
						'0 1 1 1 1 1 1 1 1 1 1 0 0 1 1 1',
						'0 1 1 0 1 0 0 1 1 1 1 0 1 0 1 0',
						'0 1 0 0 0 1 1 1 1 1 0 1 1 1 0 1',
						'0 0 1 0 1 1 1 0 1 0 1 1 1 1 1 1',
						'0 1 1 1 1 1 1 1 1 1 1 1 0 1 1 1',
						'0 1 1 0 1 1 1 1 1 1 1 1 0 1 1 0',
						'1 1 1 0 1 1 1 1 1 1 0 1 0 1 1 1',
						'1 1 1 1 1 1 1 1 1 1 1 1 0 1 1 1',
						'0 0 1 1 1 0 0 1 0 1 0 1 1 1 1 0 1 0 1 0 0 0 0 1 0',
						'1 1 1 1 1 0 0 0 1 1 1 0 1 1 1 1 0 0 1 0 1 1 1 1 1 1 1 1 0 0 0 1 1 1 0 0'
						]
						
						
		  var solve_data = ['0 1 0 5 0 4 0 0 0 0 2 0 3 0 0 0',
							'5 0 0 0 0 1 4 0 3 6 0 0 0 0 2 7',
							'0 0 1 6 4 7 0 0 0 0 5 2 8 3 0 0',
							'8 5 0 0 3 0 1 6 0 7 4 0 0 2 0 0',
							'0 0 0 9 5 8 3 0 2 0 6 0 7 4 1 0',
							'9 2 7 0 6 0 4 0 3 8 1 0 0 5 0 0',
							'0 3 0 9 0 8 5 0 4 0 2 7 1 6 0 0',
							'1 6 3 0 4 0 0 9 7 2 5 0 0 0 8 0',
							'0 7 0 0 0 4 1 0 6 0 8 3 9 2 5 0',
							'0 2 7 0 6 9 4 1 3 0 0 8 0 5 10 0',
							'10 3 0 0 0 6 9 2 0 1 4 7 5 8 0 0',
							'10 0 6 0 5 2 9 0 0 7 0 3 0 4 1 8',
							'3 6 9 0 8 0 4 0 5 2 7 10 0 11 0 1',
							'6 9 4 0 3 0 7 10 8 5 0 1 0 2 11 0',
							'0 5 0 11 7 10 1 4 0 3 6 9 0 8 0 2',
							'0 1 8 0 9 4 11 6 0 7 2 0 3 10 5 12',
							'3 8 1 12 6 11 4 9 0 2 7 0 0 5 10 0',
							'3 0 7 10 6 9 4 0 0 2 11 8 12 5 0 1',
							'11 6 0 0 4 1 10 7 0 8 5 2 0 3 0 9',
							'0 0 10 3 11 4 7 0 6 9 2 0 1 12 5 8',
							'1 8 0 0 0 11 2 5 7 4 9 12 10 0 6 3',
							'0 0 3 10 4 9 6 1 7 2 11 0 12 5 8 0',
							'0 12 5 8 6 9 2 13 11 4 7 0 0 1 10 3',
							'0 9 4 0 3 0 0 6 8 5 2 0 1 0 7 0',
							'0 7 0 0 0 2 5 8 6 9 0 3 1 4 0 10',
							'0 0 9 0 8 5 2 0 3 0 7 10 6 11 4 1',
							'0 5 12 9 11 8 1 4 6 3 10 13 0 14 7 2',
							'0 12 3 0 10 5 8 1 7 2 11 4 0 9 6 0',
							'1 6 11 0 12 9 4 7 5 2 0 10 0 13 8 3',
							'1 14 7 10 8 11 4 15 13 2 9 6 0 5 12 3',
							'0 0 2 7 12 0 0 5 0 3 0 1 8 11 6 0 10 0 4 0 0 0 0 9 0',
							'14 5 16 1 24 0 0 0 13 4 17 0 6 15 2 23 0 0 21 0 9 12 3 18 10 7 22 19 0 0 0 20 11 8 0 0'
						]
	var index = localStorage.getItem('knight-movelevel');
	document.getElementById("level").selectedIndex = index;
	if(null == index)
	{
		index = 0;
	}
	
	var set=""
	var data_str=""
	var data_arr
	var start=1
	
	
	function store_level()
	{
		if (typeof(Storage) !== "undefined") {
		  localStorage.setItem("knight-movelevel", index);
		}
   }
	
	
	function loadgame(){
	for (i = 0; i < 64; i++) {
				  element = document.getElementById("cell"+(i+1));
			  element.className = "plot";
			  element.innerHTML = "";
	}
		index = document.getElementById("level").value -1;
		start=1;
		data_str = data[index];
		data_arr = data_str.split(" ");
		console.log(data_arr);
		setSize();
		draw_board();

	}
	
	function draw_board(){
		var c=0;
		var l=0;
		for (i = 0; i < data_arr.length; i++) {
		
			if (data_arr[i] == "1") {
			  element = document.getElementById("cell"+(i+1));
			  element.className = "plot-red";
			  element.innerHTML = "";
			  c=c+1;
			}
			if (data_arr[i] == "0") {
			  element = document.getElementById("cell"+(i+1));
			  element.className = "plot";
			  element.innerHTML = "";
			}
			if (data_arr[i] == "2") {
			  element = document.getElementById("cell"+(i+1));
			  element.className = "plot-red-broder";
			  element.innerHTML = "";
			}
			if (data_arr[i] == "3") {
			  element = document.getElementById("cell"+(i+1));
			  element.className = "plot-red";
			  element.innerHTML = "&#11044;";
			  l=l+1;
			}
		}
		console.log(c,l)
		if (c==0 && l==0)
		{
			document.getElementById("finished").style.visibility ="visible";
			document.getElementById("finished").style.opacity = "1";
		}
		
		if (c>0 && l==0 && start==0 )
		{
			document.getElementById("gameover").style.visibility ="visible";
			document.getElementById("gameover").style.opacity = "1";
		}
	}
	
	function clean_data()
	{
		for (i = 0; i < data_arr.length; i++) {
			if (data_arr[i] == "3") 
				data_arr[i]=1;
		}
	}
	

	
	
	function move(k) {
		if(data_arr[k-1] == "1" && start==1) {
			data_arr[k-1]=2;
			start=0;
		var n = Math.sqrt(data_arr.length);
		var y = (k-1)%n; 
		var x = Math.floor((k-1)/n); 
		findnext(x,y,n);
		}
		if(data_arr[k-1] == "3" && start==0) {
			data_arr[k-1]=2;
			clean_data();
		var n = Math.sqrt(data_arr.length);
		var y = (k-1)%n; 
		var x = Math.floor((k-1)/n); 
		findnext(x,y,n);
		}

		draw_board();
	}
	
	function setnextmove(x,y,n)
	{
		var k = (x*n)+(y);
		if(data_arr[k]==1)
			data_arr[k]=3;
		
	}
	
	function findnext(x,y,n){
		if (x-2>-1 && y-1>-1)
			setnextmove(x-2,y-1,n)
		if (x-2>-1 && y+1<n)
			setnextmove(x-2,y+1,n)
		if (x+2<n && y-1>-1)
			setnextmove(x+2,y-1,n)
		if (x+2<n && y+1<n)
			setnextmove(x+2,y+1,n)
		if (x-1>-1 && y-2>-1)
			setnextmove(x-1,y-2,n)
		if (x-1>-1 && y+2<n)
			setnextmove(x-1,y+2,n)
		if (x+1<n && y-2>-1)
			setnextmove(x+1,y-2,n)
		if (x+1<n && y+2<n)
			setnextmove(x+1,y+2,n)
	}
	
	function newgame(){
		index = index+1;
		document.getElementById("levelname").innerHTML = "Level : "+index;
		loadgame();
	}
	
	
	function undo(){
	}
	
	function solve(){
	
		solve_data_str = solve_data[index];
		solve_data_arr = solve_data_str.split(" ");
		for (i = 0; i < solve_data_arr.length; i++) {
			if (solve_data_arr[i] == "0") {
			  element = document.getElementById("cell"+(i+1));
			  element.className = "plot";
			  element.innerHTML = "";
			}
			else {
			  element = document.getElementById("cell"+(i+1));
			  element.className = "plot-red-broder";
			  element.innerHTML = solve_data_arr[i];
			}

		}
	}
	
	function closefinish(){
			document.getElementById("finished").style.visibility ="hidden";
			document.getElementById("finished").style.opacity = "0";
			index=index+1;
			store_level();
			document.getElementById("level").selectedIndex = index;
			loadgame();
	}
	function closegameover(){
			document.getElementById("gameover").style.visibility ="hidden";
			document.getElementById("gameover").style.opacity = "0";
			loadgame();
	}
	
	function closehelp(){
			document.getElementById("help").style.visibility ="hidden";
			document.getElementById("help").style.opacity = "0";
	}
	function help(){
			document.getElementById("help").style.visibility ="visible";
			document.getElementById("help").style.opacity = "1";
	}
	
	</script>
	
  </body>
</html>
